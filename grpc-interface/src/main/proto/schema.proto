syntax = "proto3";

package com.tedd;

option java_multiple_files = true;

message Publisher{
  int32 publisherID = 1;
  string publisherName = 2;
  string country = 3;
  repeated Book books = 4; // List of books published by this publisher
  string rating = 5;
}

enum BookGenre {
  FICTION = 0;
  NON_FICTION = 1;
  SCI_FI = 2;
  MYSTERY = 3;
  ROMANCE = 4;
  FANTASY = 5;
}

message Book{
  int32 bookID = 1;
  int32 publisherID = 2;
  string bookName = 3;
  BookGenre genre = 4;
  float price = 5;
  int32 stock = 6;
  string isbn = 7;
}

// Container message for a list of books
message BooksList {
  repeated Book books = 1;
}

service BookService{
  rpc getBooksByPublisher(Publisher) returns (stream Book);

  // Additional methods for handling lists of books
  rpc getAllBooks(Empty) returns (BooksList);
  rpc addBooks(BooksList) returns (StatusResponse);
}

// Empty message for requests that don't need parameters
message Empty {}

// Response message for operations that return status
message StatusResponse {
  bool success = 1;
  string message = 2;
}